<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="Address">
  
	<!-- 배송지 입력(저장) -->  
  	<insert id="insertAddress">
  	INSERT INTO DELIVER_ADDRESS (  		
  		MEMBER_ID,
  		MEMBER_ADDRESS1,
  		MEMBER_ADDRESS2,
  		MEMBER_ADDRESS3,
  		MEMBER_ADDRESS_NO
  	) VALUES (
  		#{ member_id, jdbcType=VARCHAR}  		
  		,#{ member_address1, jdbcType=VARCHAR}
  		,#{ member_address2, jdbcType=VARCHAR}
  		,#{ member_address3, jdbcType=VARCHAR}
  		,MEMBER_ADDRESS_NO.nextval
  	)	
  	</insert>
  
  	<!-- 배송지 목록 불러오기 순차 적용 (1 -> 2 -> 3) -->
  	<select id="AddressList" resultType="com.mealkit.address.AddressVo">
  		SELECT
  			MEMBER_ID,
  			MEMBER_ADDRESS1,
  			MEMBER_ADDRESS2,
  			MEMBER_ADDRESS3,
  			MEMBER_ADDRESS_NO
  		FROM 
  			DELIVER_ADDRESS
  	</select>
  	
  	<!-- 배송지 정보 불러오기 -->
  	<select id="GetAddress" resultType="com.mealkit.address.AddressVo">
  		SELECT
  			MEMBER_ID,
  			MEMBER_ADDRESS1,
  			MEMBER_ADDRESS2,
  			MEMBER_ADDRESS3,
  			MEMBER_ADDRESS_NO
  		FROM
  			DELIVER_ADDRESS
  		WHERE
  			MEMBER_ID = #{ member_id }
  			
  	</select>
  	
  	<!-- 배송지 변경(ID는 변경X) -->
  	<update id="updateAddress">
  		UPDATE
  			DELIVER_ADDRESS
  		SET
  			MEMBER_ADDRESS1 = #{ member_address1 },
  			MEMBER_ADDRESS2 = #{ member_address2 },
  			MEMBER_ADDRESS3 = #{ member_address3 }
  		WHERE
  			MEMBER_ADDRESS_NO = #{ member_address_no }  			
  	</update>
  	
  	<!-- 배송지 삭제 -->
  	<delete id="deleteAddress">
  		DELETE
  			FROM 
  				DELIVER_ADDRESS
  			WHERE
  				MEMBER_ADDRESS_NO = #{member_address_no}
  	</delete>
  	
  	<select id="getAddressOne"
  			resultType="com.mealkit.address.AddressVo">
  	SELECT
  			MEMBER_ID,
  			MEMBER_ADDRESS1,
  			MEMBER_ADDRESS2,
  			MEMBER_ADDRESS3,
  			MEMBER_ADDRESS_NO
  		FROM 
  			DELIVER_ADDRESS
  	WHERE MEMBER_ID = #{member_id, jdbcType=VARCHAR}
  	
  	</select>
  	
  	<select id="getAddressOne2"
  			resultType="com.mealkit.address.AddressVo">
  	SELECT
  			MEMBER_ID,
  			MEMBER_ADDRESS1,
  			MEMBER_ADDRESS2,
  			MEMBER_ADDRESS3,
  			MEMBER_ADDRESS_NO
  		FROM 
  			DELIVER_ADDRESS
  	WHERE MEMBER_ADDRESS_NO = #{address_member_no}
  	
  	</select>
  	
  </mapper>